<!DOCTYPE html>
<div class="container">

  <!-- restaurant profile badge -->
  <div class="row">
    <div class="col-md-8" ng-repeat="restaurant in restaurants">
      <div class="panel panel-default" ng-init="loadMap(restaurant.lat,restaurant.lng)">
        <div class="panel-body">
          <div class="row">
            <div class="col-xs-6">
              <div class="row">
                <div class="media">
                  <div class="media-left media-middle">
                    <img class="img-circle" height="64" width="64" ng-src="{{restaurant.logo}}" alt="{{restaurant.restaurantName}}">
                  </div>
                  <div class="media-body">
                    <h4 class="media-heading">{{restaurant.restaurantName}}</h4>
                    <i class="fa fa-map-marker" aria-hidden="true"></i>
                    {{restaurant.address | capitalize}}
                    <br>
                    {{restaurant.zipcode}},
                    {{restaurant.city | capitalize}}
                    <br>
                    <!-- TODO: put main method of communication here only -->
                    <i class="fa fa-mobile" aria-hidden="true"></i>
                    {{restaurant.phoneNumber}}
                    <!-- <br>
                    <i class="fa fa-envelope" aria-hidden="true"></i>
                    {{restaurant.email}} -->
                  </div>
                </div>
              </div>

              <!-- rating -->
              <div class="row">
                <div class="col-xs-12">
                  <div ng-controller="RatingController" style="margin-top:10px;">
                    <!-- if the user has not rated the restaurant, show the restauant average rating -->
                    <span
                      ng-show="!userRated"
                      style="font-size:23px"
                      uib-rating
                      ng-model="restaurant.avgRate"
                      max="max"
                      read-only="isReadonly"
                      on-hover="hoveringOver(value)"
                      on-leave="overStar = null"
                      aria-labelledby="default-rating"
                      ng-class="text-warning"
                      ng-change="newFeedback()"></span>
                    <!-- otherwise show the user rating -->
                    <span
                      ng-show="userRated"
                      style="font-size:23px"
                      uib-rating
                      ng-model="userFeedback.rate"
                      max="max"
                      read-only="isReadonly"
                      on-hover="hoveringOver(value)"
                      on-leave="overStar = null"
                      aria-labelledby="default-rating"
                      ng-class="text-warning"
                      ng-change="newFeedback()"></span>
                    <span class="label" ng-class="{'label-warning': percent<30, 'label-info': percent>=30 && percent<70, 'label-success': percent>=70}" ng-show="overStar && !isReadonly">{{percent}}%</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- restaurant quick info  -->
            <div class="col-xs-6 h4 text-right">
              <span class="label label-success">{{state.openOrClosed}}</span>
              <!-- paid delivery -->
              <span ng-if="restaurant.deliveryFee" class="label label-primary">Delivery From &euro;{{restaurant.deliveryFee}}</span>
              <!-- free delivery -->
              <span ng-if="restaurant.deliveryFee === 0" class="label label-primary">Free Delivery</span>
              <!-- pick-up only -->
              <span ng-if="!restaurant.deliveryFee" class="label label-primary">Pick-up Only</span>
              <span class="label label-default" ng-if="restaurant.workFrom[today]">{{restaurant.workFrom[today] | date:'shortTime'}}
                -
                {{restaurant.workTo[today] | date:'shortTime'}}</span>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- TODO: center map when in full screen -->
    <!-- google map -->
    <div class="col-md-4">
      <div class="panel panel-default">
        <!-- travel meduim -->
        <div class="btn-group btn-group-justified btn-group-sm">
          <label class="btn btn-text" ng-model="travelMeduim" uib-btn-radio="'DRIVING'" ng-click="changeMeduim()">
            <i class="fa fa-car" aria-hidden="true"></i>
          </label>
          <label class="btn btn-text" ng-model="travelMeduim" uib-btn-radio="'WALKING'" ng-click="changeMeduim()">
            <i class="fa fa-male" aria-hidden="true"></i>
          </label>
          <label class="btn btn-text" ng-model="travelMeduim" uib-btn-radio="'BICYCLING'" ng-click="changeMeduim()">
            <i class="fa fa-bicycle" aria-hidden="true"></i>
          </label>
        </div>
        <div class="panel-body">
          <div id="map" style="height: 300px;"></div>
        </div>
      </div>
    </div>
  </div>

</div>
